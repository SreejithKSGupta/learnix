<div class="addcourse">
  <h1>{{ title }}</h1>

  <form [formGroup]="angForm" (ngSubmit)="onSubmit()" class="rowbox" novalidate>
    <mat-form-field appearance="fill" class="full-width">
      <mat-label>Name</mat-label>
      <input matInput formControlName="name" type="text" />
      <mat-error *ngIf="angForm.get('name')?.hasError('required')">Name is required.</mat-error>
      <mat-error *ngIf="angForm.get('name')?.hasError('pattern')">Course name should start with a letter.</mat-error>
      <mat-error *ngIf="angForm.get('name')?.hasError('minlength')">Course name should be at least 3 letters long.</mat-error>
    </mat-form-field>

    <mat-form-field appearance="fill" class="full-width">
      <mat-label>Author</mat-label>
      <input matInput formControlName="author" type="text" />
      <mat-error *ngIf="angForm.get('author')?.hasError('required')">Author is required.</mat-error>
      <mat-error *ngIf="angForm.get('author')?.hasError('pattern')">Author name should only contain letters.</mat-error>
      <mat-error *ngIf="angForm.get('author')?.hasError('minlength')">Author name should be at least 3 letters long.</mat-error>
    </mat-form-field>

    <mat-form-field appearance="fill" class="full-width">
      <mat-label>Duration (weeks)</mat-label>
      <input matInput formControlName="duration" type="number" />
      <mat-error *ngIf="angForm.get('duration')?.hasError('required')">Duration is required.</mat-error>
      <mat-error *ngIf="angForm.get('duration')?.hasError('pattern')">Duration should be a number.</mat-error>
      <mat-error *ngIf="angForm.get('duration')?.hasError('min')">Duration should be at least 4 weeks.</mat-error>
      <mat-error *ngIf="angForm.get('duration')?.hasError('max')">Duration should not exceed 12 weeks.</mat-error>
    </mat-form-field>

    <mat-form-field appearance="fill" class="full-width">
      <mat-label>Credits</mat-label>
      <input matInput formControlName="credits" type="number" />
      <mat-error *ngIf="angForm.get('credits')?.hasError('required')">Credits are required.</mat-error>
      <mat-error *ngIf="angForm.get('credits')?.hasError('pattern')">Credits should be a number.</mat-error>
      <mat-error *ngIf="angForm.get('credits')?.hasError('min')">Credits should be at least 1.</mat-error>
      <mat-error *ngIf="angForm.get('credits')?.hasError('max')">Credits should not exceed 5.</mat-error>
    </mat-form-field>

    <mat-form-field appearance="fill" class="full-width">
      <mat-label>Fees</mat-label>
      <input matInput formControlName="coursefee" type="number" />
      <mat-error *ngIf="angForm.get('coursefee')?.hasError('required')">Fees are required.</mat-error>
      <mat-error *ngIf="angForm.get('coursefee')?.hasError('pattern')">Fees should be a number.</mat-error>
      <mat-error *ngIf="angForm.get('coursefee')?.hasError('min')">Fees should be at least 0.</mat-error>
      <mat-error *ngIf="angForm.get('coursefee')?.hasError('max')">Fees should not exceed 5000.</mat-error>
    </mat-form-field>

    <mat-form-field class="techusedlist full-width" appearance="fill">
      <mat-label>Technologies Used</mat-label>
      <mat-chip-grid #chipGrid aria-label="Enter technologies">
        <mat-chip-row *ngFor="let tech of angForm.get('importantTechnologiesUsed')?.value"
                      (removed)="remove(tech)"
                      [editable]="true"
                      (edited)="edit(tech, $event)"
                      [aria-description]="'Press enter to edit ' + tech">
          {{tech}}
          <button matChipRemove [attr.aria-label]="'Remove ' + tech">
            <mat-icon>cancel</mat-icon>
          </button>
        </mat-chip-row>
        <input placeholder="Add technology..."
               [matChipInputFor]="chipGrid"
               [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
               [matChipInputAddOnBlur]="addOnBlur"
               (matChipInputTokenEnd)="add($event)" />
      </mat-chip-grid>
    </mat-form-field>

    <mat-form-field appearance="fill" class="full-width">
      <mat-label>Description</mat-label>
      <textarea matInput formControlName="description"></textarea>
      <mat-error *ngIf="angForm.get('description')?.hasError('required')">Description is required.</mat-error>
      <mat-error *ngIf="angForm.get('description')?.hasError('minlength')">Description should be at least 10 characters long.</mat-error>
    </mat-form-field>

    <button mat-flat-button color="primary" type="submit" [disabled]="angForm.invalid">{{isEditMode?"Update":"Add"}}</button>
  </form>
</div>
